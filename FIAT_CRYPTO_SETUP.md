# Fiat-to-Crypto Payment Integration ‚úÖ

## –û–±–∑–æ—Ä
–£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è NOWPayments Invoice API –¥–ª—è fiat-to-crypto –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ–ø–ª–∞—á–∏–≤–∞—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏ –≤ USD –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—Ç—å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É.

## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- **–ü—Ä—è–º—ã–µ –∫–∞—Ä—Ç–æ–≤—ã–µ –ø–ª–∞—Ç–µ–∂–∏**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–ª–∞—Ç—è—Ç Visa/Mastercard –≤ USD —á–µ—Ä–µ–∑ Mercuryo
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è**: –§–∏–∞—Ç–Ω—ã–µ –¥–µ–Ω—å–≥–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ TRX –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É
- **–ü–∞–∫–µ—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**: –£–ª—É—á—à–µ–Ω–Ω—ã–µ VIP/Premium –ø–∞–∫–µ—Ç—ã –æ–±—Ö–æ–¥—è—Ç –º–∏–Ω–∏–º—É–º $19.22
- **–†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è API**: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å –∂–∏–≤—ã–º NOWPayments API

## –ü–∞–∫–µ—Ç–Ω—ã–µ —Ü–µ–Ω—ã (–û–±—Ö–æ–¥ –º–∏–Ω–∏–º—É–º–∞ $19.22):

### VIP –ü–∞–∫–µ—Ç - $20 –∑–∞ 8 –º–µ—Å—è—Ü–µ–≤
**–í–∫–ª—é—á–∞–µ—Ç:**
- ‚úÖ VIP —Å—Ç–∞—Ç—É—Å –Ω–∞ 8 –º–µ—Å—è—Ü–µ–≤
- üí∞ +$10,000 —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ –∫–∞–ø–∏—Ç–∞–ª–∞
- ‚ö° +5,000 –æ–ø—ã—Ç–∞
- üñ•Ô∏è 30 —Å–ª–æ—Ç–æ–≤ —Å–µ—Ä–≤–µ—Ä–æ–≤ (–≤–º–µ—Å—Ç–æ 25)
- üéØ –°–Ω–∏–∂–µ–Ω–Ω—ã–µ –∫—É–ª–¥–∞—É–Ω—ã (2–º/4–º/6–º)
- ‚≠ê –ú–Ω–æ–∂–∏—Ç–µ–ª—å –æ–ø—ã—Ç–∞ x1.5
- üèÜ –ú–Ω–æ–∂–∏—Ç–µ–ª—å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞ x2 (+200)
- üíé VIP –±–µ–π–¥–∂ –≤ —á–∞—Ç–µ
- üöÄ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ

### Premium –ü–∞–∫–µ—Ç - $25 –Ω–∞–≤—Å–µ–≥–¥–∞
**–í–∫–ª—é—á–∞–µ—Ç:**
- ‚úÖ Premium —Å—Ç–∞—Ç—É—Å –Ω–∞–≤—Å–µ–≥–¥–∞
- üí∞ +$50,000 —Å—Ç–∞—Ä—Ç–æ–≤–æ–≥–æ –∫–∞–ø–∏—Ç–∞–ª–∞
- ‚ö° +15,000 –æ–ø—ã—Ç–∞
- üñ•Ô∏è 35 —Å–ª–æ—Ç–æ–≤ —Å–µ—Ä–≤–µ—Ä–æ–≤ (–≤–º–µ—Å—Ç–æ 25)
- üéØ –°–Ω–∏–∂–µ–Ω–Ω—ã–µ –∫—É–ª–¥–∞—É–Ω—ã (1.5–º/2–º/5–º)
- ‚≠ê –ú–Ω–æ–∂–∏—Ç–µ–ª—å –æ–ø—ã—Ç–∞ x1.75
- üèÜ –ú–Ω–æ–∂–∏—Ç–µ–ª—å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞ x5 (+500)
- üëë Premium –±–µ–π–¥–∂ –≤ —á–∞—Ç–µ
- ‚ö° –ë–µ–∑ –∫—É–ª–¥–∞—É–Ω–æ–≤ –º–∏–Ω–∏-–∏–≥—Ä
- üèóÔ∏è –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ —Å–µ—Ä–≤–µ—Ä–æ–≤
- üîí –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –∞–¥–º–∏–Ω—Å–∫–∏–µ —Ä–µ–∞–∫—Ü–∏–∏
- üöÄ –í—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ

## –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

‚úÖ **API Endpoint** (`/api/donate/fiat`) - –°–æ–∑–¥–∞–µ—Ç fiat –ø–ª–∞—Ç–µ–∂–∏
‚úÖ **–£–ª—É—á—à–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç–Ω—ã–µ –±–æ–Ω—É—Å—ã** —Å —Å–ª–æ—Ç–∞–º–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏ —Å—Ç–∞—Ä—Ç–æ–≤—ã–º –∫–∞–ø–∏—Ç–∞–ª–æ–º  
‚úÖ **–î–≤–æ–π–Ω—ã–µ –æ–ø—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–∞** (fiat –∏ crypto) –≤ –¥–∏–∞–ª–æ–≥–µ –ø–æ–∫—É–ø–∫–∏
‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ webhook** –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
‚úÖ **–ñ–∏–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API** —É—Å–ø–µ—à–Ω–æ

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API:

```bash
# –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è fiat-to-crypto –∏–Ω–≤–æ–π—Å–∞ (‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç)
curl -H "x-api-key: 0BYBCND-44G4DAZ-K5FPR03-WQKCRAF" \
     -H "Content-Type: application/json" \
     -X POST https://api.nowpayments.io/v1/invoice \
     -d '{
       "price_amount": 20, 
       "price_currency": "usd", 
       "pay_currency": "trx", 
       "order_id": "test_001", 
       "order_description": "Test Payment"
     }'

# –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:
{
  "id": "4339756194",
  "invoice_url": "https://nowpayments.io/payment/?iid=4339756194",
  "order_id": "test_001",
  "price_amount": "20",
  "price_currency": "USD",
  "pay_currency": "TRX"
}
```

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç VIP/Premium** –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –∏–≥—Ä—ã
2. **–ù–∞–∂–∏–º–∞–µ—Ç "–û–ø–ª–∞—Ç–∞ –∫–∞—Ä—Ç–æ–π (fiat ‚Üí crypto)"** - –∑–µ–ª–µ–Ω–∞—è –∫–Ω–æ–ø–∫–∞
3. **–°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç Invoice** —á–µ—Ä–µ–∑ NOWPayments API
4. **–û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è NOWPayments** –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
5. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã** —á–µ—Ä–µ–∑ Mercuryo
6. **–û–ø–ª–∞—á–∏–≤–∞–µ—Ç –≤ USD** (Visa/Mastercard/Apple Pay/Google Pay)
7. **NOWPayments –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ TRX** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
8. **Webhook –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç—É—Å** —Å –±–æ–Ω—É—Å–∞–º–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
9. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –±–æ–Ω—É—Å—ã** —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### Frontend (purchase-dialog.jsx):
- –î–≤–µ –∫–Ω–æ–ø–∫–∏: "Fiat ‚Üí Crypto" (–∑–µ–ª–µ–Ω–∞—è) –∏ "–ü—Ä—è–º–æ–π –∫—Ä–∏–ø—Ç–æ" (—Å–∏–Ω—è—è)
- –û—Ç–¥–µ–ª—å–Ω—ã–µ mutation –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –ø–ª–∞—Ç–µ–∂–∞
- Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏

### Backend (server/routes.js):
- `/api/donate/fiat` - —Å–æ–∑–¥–∞–Ω–∏–µ fiat –∏–Ω–≤–æ–π—Å–æ–≤
- `/api/card-crypto-purchase` - –ø—Ä—è–º—ã–µ –∫—Ä–∏–ø—Ç–æ –ø–ª–∞—Ç–µ–∂–∏  
- `/api/payment-webhook` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö webhook
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤ –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏

### Bonuses Logic:
```javascript
// VIP –±–æ–Ω—É—Å—ã
{
  money: 10000,      // +$10,000
  experience: 5000,  // +5,000 XP
  serverSlots: 30    // 30 —Å–ª–æ—Ç–æ–≤ (–±—ã–ª–æ 25)
}

// Premium –±–æ–Ω—É—Å—ã  
{
  money: 50000,      // +$50,000
  experience: 15000, // +15,000 XP
  serverSlots: 35    // 35 —Å–ª–æ—Ç–æ–≤ (–±—ã–ª–æ 25)
}
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è:

‚úÖ **–û–±—Ö–æ–¥ –º–∏–Ω–∏–º—É–º–∞** - –ø–∞–∫–µ—Ç—ã $20/$25 –≤–º–µ—Å—Ç–æ $19.22 –Ω–∞ –∫–∞–∂–¥—ã–π –ø–ª–∞—Ç–µ–∂
‚úÖ **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å** - –±–æ–Ω—É—Å—ã –¥–µ–ª–∞—é—Ç –ø–æ–∫—É–ø–∫—É –≤—ã–≥–æ–¥–Ω–µ–µ
‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –æ–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - Mercuryo –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –¥–≤–µ –æ–ø—Ü–∏–∏ –æ–ø–ª–∞—Ç—ã (fiat –∏ crypto)

## –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å—Ä–∞–∑—É –ø–æ–∫—É–ø–∞—Ç—å VIP/Premium –ø–∞–∫–µ—Ç—ã –∫–∞–∫ –∫–∞—Ä—Ç–∞–º–∏, —Ç–∞–∫ –∏ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–æ–π.